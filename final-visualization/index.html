<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>INFO 474 Final Project: Collisions Visualization</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7/leaflet.css" />
</head>

<header>
    <div class="header-container">
        <img src="../imgs/banner.jpg" alt="seattle skyline banner" class="header">
        <h1 class="header-text">INFO474: Seattle Collision Visualization</h1>
        <h2 class="author-text">Daniel Pham, Kevin Yip, & Jonathan Thomas</h2>

    </div>
</header>
<body>
    <div id="main">
        <div class="introduction">
            <h2>Background</h2>
            <p>The dataset used for this project is called “Collisions,” retrieved from data.gov, a U.S. government website that aims 
                to improve public access to datasets generated by the Executive Branch of the Federal Government. The dataset provides 
                information about collisions that have occurred in the Seattle area from January 2004 to September 2021, collected by 
                the Seattle Police Department.
            </p>
            <p>
                The dataset is a geographic traffic collision dataset in CSV form. There are a total of 
                40 attributes and approximately 230,000 rows of data. Examples of the most notable attributes include the date of an 
                incident, location (x and y coordinates), junction type, weather type, and severity description.
            </p>

            <h2>How to Use and Interpret</h2>
            <ul>
                <li>
                    <strong>Collision Analytics Card:</strong> the card shown on the left shows vital statistics for a selected region.
                    <strong>Select either a bubble/dot</strong> on the map, and the card will display information relevant to the neighborhood
                    the bubble/dot is located in. Click <strong>"Go to Location" button</strong> to make the map zoom to the location. To zoom out,
                    click <strong>"All of Seattle."</strong>
                </li>
                <li>
                    <strong>Map:</strong> the map in the middle shows the areas in Seattle that have had collisions. <strong>There are two modes
                    for the graph: neighborhood cases and individual cases.</strong> Neighborhood cases is the default view, and is shown with 
                    bubbles that are larger if there are more collision instances in a neighborhood. Individual cases show dots for every
                    collision in each neighborhood, which can be seen by toggling the <strong>"Individual Cases" switch</strong> below the analytics card.
                    To avoid accidentally clicking on neighborhoods, switch on <strong>"Drag Mode."</strong>
                </li>
            </ul>


        </div>
        <div class="container">
            <div class="left-element">
                <div class="card" style="width: 18rem;">
                    <div class="card-body">
                      <h5 class="card-title">Collision Analytics</h5>
                      <p class="card-text">Select a Dot/Bubble to see analytics!</p>
                    </div>
                    <ul class="list-group list-group-flush">
                      <li id="analytics_loc" class="list-group-item">Neighborhood: All Neighborhoods </li>
                      <!-- if this is bubble mode we do collision number, most common severity and percent, 
                            most common weather condition and percent -->
                      <li id="analytics_num" class="list-group-item">Collisions: </li>
                      <li id="analytics_sev" class="list-group-item">Most Common Severity: </li>
                      <li id="analytics_cond" class="list-group-item">Most Common Weather: </li>
                    </ul>
                    <div class="card-body">
                        <a href="#" id="analytics_loc_btn"class="btn btn-primary">Go to Location</a>
                        <a href="#" id="analytics_all_btn"class="btn btn-secondary" onclick="">All of Seattle</a>
                    </div>
                </div>
                <div class="map-modes">
                    <div class="form-check form-switch">
                        <input class="form-check-input" value="false" type="checkbox" id="mode_switch" oninput="onModeChanged()">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Individual Cases</label>
                    </div>
                    <div class="form-check form-switch">
                        <input class="form-check-input" type="checkbox" id="drag_switch" oninput="onDragChanged()">
                        <label class="form-check-label" for="flexSwitchCheckDefault">Drag Mode</label>
                    </div>
                </div>
                
            </div>

            <div class="middle-element">
                <div id="map" style="width: 700px; height: 500px; margin: 10px;"></div>
            </div>

            <div class="right-element"> 
                <p>Filter by Neighborhood:</p>
                <select class="form-select" aria-label="Default select example" id="neighborhood_select" onchange="onNeighborhoodChanged()">
                </select>

                <div class="sliders">
                    <div class="month-slider">
                        <p id="month_span"> Month Range </p>
                        <div id="month_slider"></div>
                    </div>
                    <div class="person-slider">
                        <p id="person_span"> Person Count Range </p>
                        <div id="person_slider"></div>
                    </div>
                </div>

                <button id="back_button" type="button" class="btn btn-dark">Back to Default</button>
            </div>
        </div>

        <div class="bar-charts">
            <div>
                <p id="tempBarchartTitle" style="padding-top: 20px;"></p>
                <div id="collisionGraph1" style="width: 600px; height: 300px"></div>
            </div>
        </div>
    </div>
</body>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
<script src="https://d3js.org/d3.v5.min.js"></script>
<script src="https://d19vzq90twjlae.cloudfront.net/leaflet-0.7/leaflet.js"></script>
<script src='https://unpkg.com/@turf/turf@6/turf.min.js'></script>
<script src="./main.js"></script>
</html>